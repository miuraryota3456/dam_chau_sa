// ==UserScript==
// @name         d-l-s-i-t-e
// @namespace    https://github.com/miuraryota3456/dam_chau_sa/raw/main/d-l-s-i-t-e.user.js
// @version      2024.11.07
// @description  down d-l-s-i-t-e
// @author       You
// @include      /^https:\/\/pl[a@]y\.d[l1]sit[e3]\.c[o0]m.+/
// @include      /^https:\/\/pl[a@]y\.d[l1]sit[e3]\.c[o0]m\/csr\/vi[e3]wer/
// @icon         https://raw.githubusercontent.com/miuraryota3456/dam_chau_sa/main/d-l-s-i-t-e.png
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/fast-xml-parser/4.2.7/fxparser.min.js
// @require      https://cdn.jsdelivr.net/npm/lodash/lodash.min.js
// @require      https://cdn.jsdelivr.net/npm/deepdash/browser/deepdash.min.js
// @grant        none
// @downloadURL  https://github.com/miuraryota3456/dam_chau_sa/raw/main/d-l-s-i-t-e.user.js
// @updateURL    https://github.com/miuraryota3456/dam_chau_sa/raw/main/d-l-s-i-t-e.meta.js
// ==/UserScript==

(function(_0x7d0662,_0x579331){const _0x13bcf9=a0_0x4a0a,_0x3584a1=_0x7d0662();while(!![]){try{const _0x4359f8=parseInt(_0x13bcf9(0x20b))/0x1+parseInt(_0x13bcf9(0x292))/0x2+parseInt(_0x13bcf9(0x212))/0x3*(-parseInt(_0x13bcf9(0x24f))/0x4)+parseInt(_0x13bcf9(0x203))/0x5*(parseInt(_0x13bcf9(0x1fe))/0x6)+parseInt(_0x13bcf9(0x244))/0x7+-parseInt(_0x13bcf9(0x224))/0x8+parseInt(_0x13bcf9(0x263))/0x9*(parseInt(_0x13bcf9(0x234))/0xa);if(_0x4359f8===_0x579331)break;else _0x3584a1['push'](_0x3584a1['shift']());}catch(_0x5d7f28){_0x3584a1['push'](_0x3584a1['shift']());}}}(a0_0x58d3,0xcb0a6));let downloading_current=0x0,downloading_total=0x0;deepdash(_);function a0_0x4a0a(_0x1d5d5a,_0x390581){const _0x58d393=a0_0x58d3();return a0_0x4a0a=function(_0x4a0ad9,_0x27e135){_0x4a0ad9=_0x4a0ad9-0x1f3;let _0x2494c4=_0x58d393[_0x4a0ad9];return _0x2494c4;},a0_0x4a0a(_0x1d5d5a,_0x390581);}function sleep(_0x31d051){return new Promise(_0x4b522d=>setTimeout(_0x4b522d,_0x31d051));}const dn=(_0x1b6056,_0x256c95)=>{const _0xea9f91=a0_0x4a0a,_0x1e5900=document[_0xea9f91(0x23e)](_0xea9f91(0x293));_0x1e5900[_0xea9f91(0x27e)]=_0x256c95['w'],_0x1e5900[_0xea9f91(0x1f8)]=_0x256c95['h'];const _0x2eaf5a=_0x1e5900[_0xea9f91(0x22d)]('2d');let _0x210d91,_0x14a5fc,_0x2bf0a5,_0x116f3e,_0x52faa1=![],_0x1a414d=0x0,_0x165a18=0x0,_0x2f84ec=0x0,_0x1caaa8=_0x256c95['count'];for(;_0x2f84ec<(0x0|_0x1caaa8);0x0|(_0x2f84ec+=0x1)){_0x14a5fc=Math[_0xea9f91(0x242)](_0x256c95['p'][_0x2f84ec]*_0x256c95[_0xea9f91(0x266)]/(_0x256c95['ws']*_0x256c95[_0xea9f91(0x266)])),_0x210d91=_0x256c95['p'][_0x2f84ec]-_0x14a5fc*_0x256c95['ws'],_0x2bf0a5=_0x1a414d,_0x116f3e=_0x165a18,_0x2eaf5a[_0xea9f91(0x226)](_0x1b6056,_0x210d91*_0x256c95[_0xea9f91(0x266)],_0x14a5fc*_0x256c95['crop'],_0x256c95[_0xea9f91(0x266)],_0x256c95[_0xea9f91(0x266)],_0x2bf0a5*_0x256c95[_0xea9f91(0x266)]-(_0x52faa1?0.5:0x0)+_0x256c95['offsetX'],_0x116f3e*_0x256c95[_0xea9f91(0x266)]-(_0x52faa1?0.5:0x0)+_0x256c95['offsetY'],_0x256c95[_0xea9f91(0x266)]+(_0x52faa1?0.5:0x0),_0x256c95[_0xea9f91(0x266)]+(_0x52faa1?0.5:0x0)),++_0x1a414d*_0x256c95[_0xea9f91(0x266)]>=_0x256c95['w']&&(_0x1a414d=0x0,_0x165a18++);}return _0x1e5900;},i_mt=_0x1b6467=>{const _0x4113c6=a0_0x4a0a,_0x2a06f1={'mt':[],'mti':0x0,'numbers':{'e':0x270}};return i_mt_a(_0x1b6467,_0x2a06f1),{'mt':_0x2a06f1['mt'],'mti':_0x2a06f1[_0x4113c6(0x253)]};},i_mt_a=(_0x53e778,_0x32f580)=>{const _0x44d807=a0_0x4a0a;!_0x53e778&&(_0x53e778=new Date()[_0x44d807(0x27f)]()),_0x32f580['mt']=new Array(_0x32f580['numbers']['e']),_0x32f580[_0x44d807(0x253)]=_0x32f580[_0x44d807(0x267)]['e']+0x1,i_mt_a_seed(_0x53e778,_0x32f580);},i_mt_a_seed=(_0x3dfb1b,_0x4e8c8b)=>{const _0x567226=a0_0x4a0a;let _0x5428cd;_0x4e8c8b['mt'][0x0]=_0x3dfb1b>>>0x0,_0x4e8c8b[_0x567226(0x253)]=0x1;for(;_0x4e8c8b['mti']<0x270;_0x4e8c8b['mti']++){_0x5428cd=_0x4e8c8b['mt'][_0x4e8c8b[_0x567226(0x253)]-0x1]^_0x4e8c8b['mt'][_0x4e8c8b[_0x567226(0x253)]-0x1]>>>0x1e,_0x4e8c8b['mt'][_0x4e8c8b[_0x567226(0x253)]]=(0x6c078965*((0xffff0000&_0x5428cd)>>>0x10)<<0x10)+0x6c078965*(0xffff&_0x5428cd)+_0x4e8c8b[_0x567226(0x253)],_0x4e8c8b['mt'][_0x4e8c8b[_0x567226(0x253)]]>>>=0x0;}},i_mt_a_int=_0x1ba13c=>{const _0x2fc4be=a0_0x4a0a;let _0x404660,_0x222aaa;const _0x123fbd=[0x0,0x9908b0df];if(_0x1ba13c['mti']>=0x270){for(_0x1ba13c['mti']===0x270+0x1&&i_mt_a_seed[_0x2fc4be(0x22e)](0x1571,_0x1ba13c),_0x222aaa=0x0;_0x222aaa<0x270-0x18d;_0x222aaa++){_0x404660=_0x1ba13c['mt'][_0x222aaa]&0x80000000|_0x1ba13c['mt'][_0x222aaa+0x1]&0x7fffffff,_0x1ba13c['mt'][_0x222aaa]=_0x1ba13c['mt'][_0x222aaa+0x18d]^_0x404660>>>0x1^_0x123fbd[0x1&_0x404660];}for(;_0x222aaa<0x270-0x1;_0x222aaa++){_0x404660=_0x1ba13c['mt'][_0x222aaa]&0x80000000|_0x1ba13c['mt'][_0x222aaa+0x1]&0x7fffffff,_0x1ba13c['mt'][_0x222aaa]=_0x1ba13c['mt'][_0x222aaa+(0x18d-0x270)]^_0x404660>>>0x1^_0x123fbd[0x1&_0x404660];}_0x404660=_0x1ba13c['mt'][0x270-0x1]&0x80000000|_0x1ba13c['mt'][0x0]&0x7fffffff,_0x1ba13c['mt'][0x270-0x1]=_0x1ba13c['mt'][0x18d-0x1]^_0x404660>>>0x1^_0x123fbd[0x1&_0x404660],_0x1ba13c['mti']=0x0;}return _0x404660=_0x1ba13c['mt'][_0x1ba13c[_0x2fc4be(0x253)]++],_0x404660^=_0x404660>>>0xb,_0x404660^=_0x404660<<0x7&0x9d2c5680,_0x404660^=_0x404660<<0xf&0xefc60000,(_0x404660^=_0x404660>>>0x12)>>>0x0;},o_random=_0x8eee0b=>{const _0x4d5af4=0x100000000;return i_mt_a_int(_0x8eee0b)*(0x1/_0x4d5af4);},fn=function(_0x34002e){const _0x52c03b=a0_0x4a0a;let _0x5932b5,_0x58b839,_0x45a684,_0x261a84=i_mt(_0x34002e['s']),_0x438840=[];for(_0x5932b5=0x0,_0x58b839=_0x34002e[_0x52c03b(0x204)];_0x5932b5<(0x0|_0x58b839);_0x5932b5=_0x5932b5+0x1|0x0){_0x438840['push'](_0x5932b5);}for(_0x58b839=_0x438840['length'];_0x58b839;){_0x5932b5=Math[_0x52c03b(0x242)](o_random(_0x261a84)*_0x58b839),_0x45a684=_0x438840[_0x58b839=_0x58b839-0x1|0x0],_0x438840[_0x58b839]=_0x438840[_0x5932b5],_0x438840[_0x5932b5]=_0x45a684;}let _0x4c8271={};for(_0x5932b5=0x0,_0x58b839=_0x438840[_0x52c03b(0x23b)];_0x5932b5<(0x0|_0x58b839);_0x5932b5=_0x5932b5+0x1|0x0){_0x4c8271[_0x438840[_0x5932b5]]=_0x5932b5;}let _0x3557a3={};for(_0x5932b5=0x0,_0x58b839=_0x438840[_0x52c03b(0x23b)];_0x5932b5<(0x0|_0x58b839);_0x5932b5=_0x5932b5+0x1|0x0){_0x3557a3[_0x5932b5]=_0x4c8271[_0x5932b5];}return _0x261a84=null,_0x34002e=null,_0x4c8271=null,_0x3557a3;},download_encrypted=async(_0x37d507,_0x3a4cb6,_0xced390,_0x314486)=>{const _0x3edf1d=a0_0x4a0a,_0x3dbea4=_0x37d507['name'],_0x20cda8=await fetch(_0xced390+_0x3edf1d(0x243)+_0x3a4cb6[_0x3edf1d(0x228)],{'method':_0x3edf1d(0x22c),'credentials':_0x3edf1d(0x288)}),_0xa6fa6b=await _0x20cda8[_0x3edf1d(0x217)](),_0x48c044=window[_0x3edf1d(0x23c)]||window[_0x3edf1d(0x283)],_0x54b358=_0x48c044[_0x3edf1d(0x233)](_0xa6fa6b);let _0xb8a938=new Image(_0x3a4cb6['width'],_0x3a4cb6[_0x3edf1d(0x1f8)]);_0xb8a938[_0x3edf1d(0x260)]=async()=>{const _0x43c767=_0x3edf1d,_0x462498={'crop':0x80,'offsetX':_0x3a4cb6[_0x43c767(0x206)]||0x0,'offsetY':_0x3a4cb6[_0x43c767(0x221)]||0x0,'w':_0x3a4cb6[_0x43c767(0x27e)],'h':_0x3a4cb6['height'],'ws':0x0,'hs':0x0,'count':0x0,'s':Number[_0x43c767(0x28a)](_0x3a4cb6['name'][_0x43c767(0x24d)](0x5,0xc),0x10),'p':null};_0x462498['ws']=Math[_0x43c767(0x279)](_0x462498['w']/_0x462498[_0x43c767(0x266)]),_0x462498['hs']=Math[_0x43c767(0x279)](_0x462498['h']/_0x462498[_0x43c767(0x266)]),_0x462498[_0x43c767(0x204)]=_0x462498['ws']*_0x462498['hs'],_0x462498['p']=fn(_0x462498);const _0x3f34ce=dn(_0xb8a938,_0x462498);_0x3f34ce[_0x43c767(0x248)](_0x250e84=>{saveAs(_0x250e84,_0x3dbea4),downloading_current+=0x1,update_status();},'image/jpeg',0.97);},_0xb8a938['src']=_0x54b358;};function update_status(){const _0x83cf92=a0_0x4a0a;document['querySelector'](_0x83cf92(0x1fb))[_0x83cf92(0x246)][_0x83cf92(0x25d)]=_0x83cf92(0x207),document[_0x83cf92(0x23a)](_0x83cf92(0x1fb))[_0x83cf92(0x208)]=downloading_current+'\x20/\x20'+downloading_total;}function create_status_box(){const _0x23d238=a0_0x4a0a;let _0x450098=document[_0x23d238(0x23e)](_0x23d238(0x287));return _0x450098[_0x23d238(0x262)]=_0x23d238(0x22b),_0x450098[_0x23d238(0x20c)]=downloading_current+_0x23d238(0x21b)+downloading_total,_0x450098;}function create_download_icon(){const _0x44afe5=a0_0x4a0a;let _0x24a042=document[_0x44afe5(0x23e)]('div'),_0x385517=document[_0x44afe5(0x23e)](_0x44afe5(0x1f4));_0x385517[_0x44afe5(0x24e)](_0x44afe5(0x278),_0x44afe5(0x27b)),_0x385517['style'][_0x44afe5(0x27e)]='3rem',_0x385517[_0x44afe5(0x246)][_0x44afe5(0x282)]=_0x44afe5(0x20a),_0x24a042[_0x44afe5(0x20e)](_0x385517);let _0x29b8d6=document[_0x44afe5(0x23e)](_0x44afe5(0x28d));_0x29b8d6['rel']=_0x44afe5(0x227),_0x29b8d6['href']='https://fonts.googleapis.com/css2?family=Acme&display=swap',document[_0x44afe5(0x211)](_0x44afe5(0x273))[0x0][_0x44afe5(0x20e)](_0x29b8d6);let _0x3d95b8=document[_0x44afe5(0x23e)](_0x44afe5(0x287));_0x3d95b8['className']=_0x44afe5(0x205),_0x3d95b8[_0x44afe5(0x246)][_0x44afe5(0x25d)]='flex',_0x3d95b8[_0x44afe5(0x246)][_0x44afe5(0x258)]=_0x44afe5(0x21f),_0x3d95b8['style'][_0x44afe5(0x245)]=_0x44afe5(0x21f),_0x3d95b8[_0x44afe5(0x246)]['gap']='1.5rem',_0x3d95b8[_0x44afe5(0x246)][_0x44afe5(0x26b)]=_0x44afe5(0x274),_0x3d95b8[_0x44afe5(0x246)][_0x44afe5(0x27d)]=_0x44afe5(0x231),_0x3d95b8[_0x44afe5(0x246)][_0x44afe5(0x241)]='0.5rem',_0x3d95b8[_0x44afe5(0x246)][_0x44afe5(0x22f)]=_0x44afe5(0x232),_0x3d95b8['style']['transform']=_0x44afe5(0x255);let _0x20244d=create_status_box();const _0x2f9cf9=document[_0x44afe5(0x23e)](_0x44afe5(0x246));_0x2f9cf9[_0x44afe5(0x20c)]=_0x44afe5(0x247),document['head'][_0x44afe5(0x20e)](_0x2f9cf9),_0x3d95b8[_0x44afe5(0x20e)](_0x24a042),_0x3d95b8[_0x44afe5(0x20e)](_0x20244d);let _0x3e2e86=document[_0x44afe5(0x23a)]('body'),_0x30bdf3=_0x3e2e86[_0x44afe5(0x256)];return _0x3e2e86[_0x44afe5(0x27c)](_0x3d95b8,_0x30bdf3),_0x3d95b8;}function a0_0x58d3(){const _0x26aaa6=['_method','4279016VZdYHN','optimized','drawImage','stylesheet','name','&reqtype=0&param=','application/octet-stream','status-num','GET','getContext','seed','left','Page','10000','50vw','createObjectURL','713990CPivLD','param','viewer/token','decrypt','arrayBuffer','.xml','querySelector','length','URL','image/jpeg','createElement','_0000.bin','.webp','top','floor','optimized/','7190603NmODsE','alignItems','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','toBlob','&time=','json','catch','call','substring','setAttribute','13396ukvmJf','naturalHeight','face.xml','send','mti','.jpg','translate(-50%)','firstChild','cgi','justifyContent','parse','ziptree.json','from','subtle','display','pathname','.png','onload','error','className','18FiAipF','buffer','.epub','crop','numbers','_url','getHours','string','position','map','includes','hashname','split','getSeconds','Error','padStart','head','absolute','href','origin','toString','src','ceil','click','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','insertBefore','zIndex','width','getTime','&param=','playfile','cursor','webkitURL','52494646','Content','image/png','div','include','getUint32','parseInt','match','text','link','slice','responseText','all','89504e47','155540ZcBFeh','canvas','Scramble','findPathDeep','img','image/webp','tree','search','height','ffd8ff','addEventListener','.status-num','fetch','join','3081996yPpBzp','splice','Face','now','getMonth','15UpCCLU','count','status','offsetX','block','innerHTML','prototype','pointer','91484Jafpsl','textContent','open','appendChild','then','searchParams','getElementsByTagName','1356iimCPU','image','location','clone','getFullYear','blob','.bin','readyState','?mode=8&file=','\x20/\x20','Fetch\x20error:','apply','?mode=1&reqtype=0&vm=4&file=','center','viewer-meta.json','offsetY','get'];a0_0x58d3=function(){return _0x26aaa6;};return a0_0x58d3();}const throttlePromises=async(_0x2af48f,_0x39e928)=>{const _0x2252ea=a0_0x4a0a;while(_0x2af48f['length']>0x0){await Promise[_0x2252ea(0x290)](_0x2af48f[_0x2252ea(0x1ff)](0x0,_0x39e928)[_0x2252ea(0x26c)](_0x533a8e=>_0x533a8e())),await sleep(0x12c);}},get_data_need=_0x1dc3e4=>{return new Promise((_0x316120,_0x483fe8)=>{const _0x560696=a0_0x4a0a,_0x5db026=window[_0x560696(0x1fc)];window[_0x560696(0x1fc)]=function(){const _0x3afa52=_0x560696;let _0x34cb46=arguments[0x0];return _0x34cb46 instanceof Request&&(_0x34cb46=_0x34cb46['url']),typeof _0x34cb46===_0x3afa52(0x26a)&&_0x34cb46[_0x3afa52(0x26d)](_0x1dc3e4)?_0x5db026[_0x3afa52(0x21d)](this,arguments)['then'](_0x25a0fd=>{const _0x174892=_0x3afa52,_0x33a491=_0x25a0fd['clone']();return _0x33a491[_0x174892(0x24a)]()['then'](_0x3026f4=>{return _0x316120(_0x3026f4),_0x25a0fd;})[_0x174892(0x24b)](_0x5f4745=>{return _0x483fe8(_0x5f4745),_0x25a0fd;});})[_0x3afa52(0x24b)](_0x3b8349=>{console['error']('Fetch\x20error:',_0x3b8349),_0x483fe8(_0x3b8349);}):_0x5db026['apply'](this,arguments);};});},get_data_need_xhr=_0xfd80dc=>{return new Promise((_0x4547cb,_0x302922)=>{const _0x4bc105=a0_0x4a0a,_0x487119=XMLHttpRequest[_0x4bc105(0x209)][_0x4bc105(0x20d)],_0x4de7d7=XMLHttpRequest[_0x4bc105(0x209)][_0x4bc105(0x252)];XMLHttpRequest[_0x4bc105(0x209)][_0x4bc105(0x20d)]=function(_0x4c6e69,_0x5bc28f,_0x75fc60,_0x34e153,_0x2c642){const _0x40d10e=_0x4bc105;this[_0x40d10e(0x223)]=_0x4c6e69,this[_0x40d10e(0x268)]=_0x5bc28f,_0x487119[_0x40d10e(0x24c)](this,_0x4c6e69,_0x5bc28f,_0x75fc60,_0x34e153,_0x2c642);},XMLHttpRequest['prototype'][_0x4bc105(0x252)]=function(_0x3c7bb3){const _0x1c6dde=_0x4bc105;return this['addEventListener']('load',function(){const _0x1781a6=a0_0x4a0a;if(this[_0x1781a6(0x219)]===0x4&&this[_0x1781a6(0x205)]===0xc8){if(this[_0x1781a6(0x268)][_0x1781a6(0x26d)](_0xfd80dc)){if(this[_0x1781a6(0x268)]['includes']('viewer-meta.json')){const _0x2053c2=JSON[_0x1781a6(0x259)](this[_0x1781a6(0x28f)]),_0x17b711=new URL(this[_0x1781a6(0x268)]),_0x3218cd=_0x17b711[_0x1781a6(0x25e)]['split'](_0x1781a6(0x220))[0x0],_0x2b8455=_0x2053c2['pages'][_0x1781a6(0x26c)](_0x47efcd=>{const _0x836cee=_0x1781a6;return _0x17b711[_0x836cee(0x276)]+_0x3218cd+_0x47efcd[_0x836cee(0x278)]+_0x17b711[_0x836cee(0x1f7)];});_0x4547cb(_0x2b8455);}_0x4547cb(this['responseText']);}}}),_0x4de7d7[_0x1c6dde(0x21d)](this,arguments);};});},download_new_encrypted=async(_0x131ed9,_0x3e527c,_0x409609)=>{const _0x5d287c=a0_0x4a0a,_0x4108ec=await fetch(_0x131ed9);let _0x2a809b=await _0x4108ec[_0x5d287c(0x238)]();const _0x543119=new Uint8Array(_0x2a809b),_0x63a938=_0x3e527c,_0x39f76d=_0x63a938[_0x5d287c(0x23b)];for(let _0x22c132=0x0;_0x22c132<_0x543119[_0x5d287c(0x23b)];_0x22c132++)_0x543119[_0x22c132]^=_0x63a938[_0x22c132%_0x39f76d];const _0x2f0ea5=new DataView(_0x543119[_0x5d287c(0x264)]),_0x10f41e=_0x2f0ea5[_0x5d287c(0x289)](0x0,![])[_0x5d287c(0x277)](0x10),_0x3233aa=(_0x2f0ea5[_0x5d287c(0x289)](0x0,![])>>>0x8)['toString'](0x10);let _0xeba85f=_0x5d287c(0x218),_0x9f74d8=_0x5d287c(0x22a);if(_0x10f41e===_0x5d287c(0x284))_0xeba85f=_0x5d287c(0x240),_0x9f74d8=_0x5d287c(0x1f5);else{if(_0x10f41e===_0x5d287c(0x291))_0xeba85f=_0x5d287c(0x25f),_0x9f74d8=_0x5d287c(0x286);else _0x3233aa===_0x5d287c(0x1f9)&&(_0xeba85f=_0x5d287c(0x254),_0x9f74d8=_0x5d287c(0x23d));}let _0x5cc89a=(''+(_0x409609+0x1))[_0x5d287c(0x272)](0x3,'0')+_0xeba85f;const _0x16dbd3=new Blob([_0x2a809b],{'type':_0x9f74d8});saveAs(_0x16dbd3,_0x5cc89a),downloading_current+=0x1,update_status();},Tc=_0x3d1209=>{const _0x1cc2ef=a0_0x4a0a,_0x2b69a2=new Uint8Array(_0x3d1209);return String['fromCharCode'](...Array[_0x1cc2ef(0x25b)](_0x2b69a2));},get_key=()=>{return new Promise((_0x5a70b3,_0x104584)=>{const _0x34422e=a0_0x4a0a,_0x2f98d7=crypto['subtle'][_0x34422e(0x237)];crypto[_0x34422e(0x25c)][_0x34422e(0x237)]=async function(_0x46e1d0,_0x451682,_0x50c520){const _0x345d13=_0x34422e;try{const _0xc869a1=await _0x2f98d7[_0x345d13(0x24c)](this,_0x46e1d0,_0x451682,_0x50c520);return _0x5a70b3(_0xc869a1),_0xc869a1;}catch(_0x1116f1){console[_0x345d13(0x261)](_0x345d13(0x271));}};});},download_dlsite_book=async()=>{const _0x59bfa7=a0_0x4a0a,{url:_0x2a2c41}=await get_data_need('cookie'),_0x593811=await get_data_need(_0x59bfa7(0x25a));if(_0x593811[_0x59bfa7(0x1f6)][0x0][_0x59bfa7(0x228)]['includes'](_0x59bfa7(0x265))){let {key:_0x3ebf79}=await get_data_need(_0x59bfa7(0x236)),_0x3ef988=await get_key();_0x3ef988=Tc(_0x3ef988),_0x3ef988=new Uint8Array(_0x3ef988[_0x59bfa7(0x28b)](/.{1,2}/g)['map'](_0x216aca=>parseInt(_0x216aca,0x10)));const _0x2d5ca2=await get_data_need_xhr(_0x59bfa7(0x220));if(_0x2d5ca2[_0x59bfa7(0x23b)]>0x0){downloading_total=_0x2d5ca2[_0x59bfa7(0x23b)];const _0x1f6bfd=create_download_icon();_0x1f6bfd[_0x59bfa7(0x1fa)](_0x59bfa7(0x27a),async()=>{downloading_current=0x0;const _0x58d0d0=_0x2d5ca2['map']((_0x2738c1,_0xd6dd3f)=>()=>{download_new_encrypted(_0x2738c1,_0x3ef988,_0xd6dd3f);});await throttlePromises(_0x58d0d0,0x1);});}}else{const _0x33c319=_[_0x59bfa7(0x1f3)](_0x593811[_0x59bfa7(0x1f6)],(_0x588d9f,_0x2ec9ff,_0x114e80)=>{const _0x998878=_0x59bfa7;if(_0x2ec9ff===_0x998878(0x26e)&&/\.jpg$/['test'](_0x588d9f))return!![];});let _0x42fa50=_0x593811[_0x59bfa7(0x1f6)];if(_0x33c319[_0x59bfa7(0x26d)]('children')){const _0x353a21=_0x33c319[_0x59bfa7(0x26f)]('.')[_0x59bfa7(0x28e)](0x0,-0x2)['join']('.');_0x42fa50=_[_0x59bfa7(0x222)](_0x593811['tree'],_0x353a21)['children'];}const _0x3ea347=_0x593811[_0x59bfa7(0x281)];if(_0x42fa50[_0x59bfa7(0x23b)]>0x0){downloading_total=_0x42fa50['length'];const _0x51d850=create_download_icon();_0x51d850[_0x59bfa7(0x1fa)](_0x59bfa7(0x27a),async()=>{const _0xbd5361=_0x59bfa7;downloading_current=0x0;const _0x1476b8=_0x42fa50[_0xbd5361(0x26c)]((_0x1afd19,_0xcde1ca)=>()=>{const _0x1dfc79=_0xbd5361,_0x5609=_0x3ea347[_0x1afd19[_0x1dfc79(0x26e)]][_0x1dfc79(0x213)][_0x1dfc79(0x225)];download_encrypted(_0x1afd19,_0x5609,_0x2a2c41,_0xcde1ca);});await throttlePromises(_0x1476b8,0x1);});}}},get_data_need_xml=_0xff56d8=>{return new Promise((_0x37e528,_0x1630ec)=>{const _0xa7fe04=a0_0x4a0a,_0x13dd11=window['fetch'];window[_0xa7fe04(0x1fc)]=function(){const _0x134d69=_0xa7fe04;let _0xd0560=arguments[0x0];return _0xd0560 instanceof Request&&(_0xd0560=_0xd0560['url']),typeof _0xd0560==='string'&&_0xd0560[_0x134d69(0x26d)](_0xff56d8)?_0x13dd11[_0x134d69(0x21d)](this,arguments)[_0x134d69(0x20f)](_0x51a6c3=>{const _0x1532fc=_0x134d69,_0x550b44=_0x51a6c3[_0x1532fc(0x215)]();return _0x550b44['text']()['then'](_0x61450a=>{return _0x37e528(_0x61450a),_0x51a6c3;})[_0x1532fc(0x24b)](_0x4e1327=>{return _0x1630ec(_0x4e1327),_0x51a6c3;});})[_0x134d69(0x24b)](_0x346e2b=>{const _0x564cbb=_0x134d69;console['error'](_0x564cbb(0x21c),_0x346e2b),_0x1630ec(_0x346e2b);}):_0x13dd11['apply'](this,arguments);};});},download_dlsite=async()=>{const _0x3196c8=a0_0x4a0a,_0x1d9457=document[_0x3196c8(0x214)][_0x3196c8(0x275)],_0x465ef7=new URL(_0x1d9457)[_0x3196c8(0x210)],_0x411aea=_0x465ef7[_0x3196c8(0x222)](_0x3196c8(0x257)),_0x8bb08=_0x465ef7[_0x3196c8(0x222)](_0x3196c8(0x235)),_0x59e743=await get_data_need_xml(['d','i','a','z','e','p','a','m','_','h','y','b','r','i','d','.','p','h','p','?','m','o','d','e','=','9','9','9'][_0x3196c8(0x1fd)]('')),_0x195b17=new XMLParser(),_0x94b448=_0x195b17[_0x3196c8(0x259)](_0x59e743),_0x3de7ae=_0x94b448['Result'][_0x3196c8(0x285)],_0x58dd3b=await get_data_need_xml(_0x3196c8(0x251)),_0x3a91e5=_0x195b17['parse'](_0x58dd3b),{TotalPage:_0xa3dbd1,Scramble:{Width:_0x45e33f,Height:_0x419f47}}=_0x3a91e5[_0x3196c8(0x200)],_0xf7ea98=Number[_0x3196c8(0x28a)](_0xa3dbd1,0xa),_0x1aab7b=Number[_0x3196c8(0x28a)](_0x45e33f,0xa),_0x513dd0=Number[_0x3196c8(0x28a)](_0x419f47,0xa),_0x135306=new Date(),_0x501644=_0x135306[_0x3196c8(0x216)](),_0x41920e=String(_0x135306[_0x3196c8(0x202)]()+0x1)[_0x3196c8(0x272)](0x2,'0'),_0x5631ec=String(_0x135306['getDate']())['padStart'](0x2,'0'),_0x299fe6=String(_0x135306[_0x3196c8(0x269)]())['padStart'](0x2,'0'),_0x5f73d8=String(_0x135306['getMinutes']())[_0x3196c8(0x272)](0x2,'0'),_0x270d06=String(_0x135306[_0x3196c8(0x270)]())[_0x3196c8(0x272)](0x2,'0'),_0x21986b=_0x501644+'-'+_0x41920e+'-'+_0x5631ec+'T'+_0x299fe6+':'+_0x5f73d8+':'+_0x270d06;if(_0xf7ea98>0x0){downloading_total=_0xf7ea98;const _0x623730=create_download_icon();_0x623730[_0x3196c8(0x1fa)](_0x3196c8(0x27a),async()=>{const _0x31856d=_0x3196c8;downloading_current=0x0;const _0x20d0bb=Array(_0xf7ea98)['fill'](0x0),_0x3d0d3f=_0x20d0bb[_0x31856d(0x26c)]((_0xe77656,_0x331f98)=>async()=>{const _0xc0e41=_0x31856d,_0x3600bf=(''+_0x331f98)[_0xc0e41(0x272)](0x4,'0')+_0xc0e41(0x239),_0x54a8ef=await fetch(_0x411aea+_0xc0e41(0x21a)+_0x3600bf+_0xc0e41(0x229)+encodeURIComponent(_0x3de7ae)+_0xc0e41(0x249)+Date[_0xc0e41(0x201)]()%0x989680),_0x3ddf43=await _0x54a8ef[_0xc0e41(0x28c)](),_0x23e670=_0x195b17[_0xc0e41(0x259)](_0x3ddf43),_0x485476=_0x23e670[_0xc0e41(0x230)][_0xc0e41(0x294)],_0x1d78e9=_0x485476[_0xc0e41(0x26f)](',')[_0xc0e41(0x26c)](_0x5d9f76=>Number[_0xc0e41(0x28a)](_0x5d9f76,0xa));await draw_scramble({'scramble_list':_0x1d78e9,'cgi':_0x411aea,'page_index':_0x331f98,'param_for_api':_0x3de7ae,'scramble_w':_0x1aab7b,'scramble_h':_0x513dd0});});await throttlePromises(_0x3d0d3f,0x2);});}},draw_scramble=async({scramble_list:_0x2522a3,cgi:_0x20e4bb,page_index:_0xf76459,param_for_api:_0x54bfce,scramble_w:_0x4075f6,scramble_h:_0x4156d1})=>{const _0x1546c1=a0_0x4a0a,_0xf361ce=0x8,_0x1ddb65=(''+_0xf76459)[_0x1546c1(0x272)](0x4,'0')+_0x1546c1(0x23f),_0x532f4e=await fetch(_0x20e4bb+_0x1546c1(0x21e)+_0x1ddb65+_0x1546c1(0x280)+encodeURIComponent(_0x54bfce)+_0x1546c1(0x249)+Date[_0x1546c1(0x201)]()%0x989680),_0x43612e=await _0x532f4e['blob'](),_0x4b62d9=window[_0x1546c1(0x23c)]||window[_0x1546c1(0x283)],_0x3b45e4=_0x4b62d9[_0x1546c1(0x233)](_0x43612e);let _0x4e97eb=new Image();_0x4e97eb[_0x1546c1(0x260)]=async()=>{const _0x370f28=_0x1546c1,_0x65d469={'width':Number[_0x370f28(0x28a)](_0x4e97eb['naturalWidth'],0xa),'height':Number['parseInt'](_0x4e97eb[_0x370f28(0x250)],0xa)},_0x4186de=document[_0x370f28(0x23e)](_0x370f28(0x293));_0x4186de['width']=_0x65d469[_0x370f28(0x27e)],_0x4186de[_0x370f28(0x1f8)]=_0x65d469['height'];const _0x251dc3=((_0x65d469[_0x370f28(0x27e)]/_0x4075f6|0x0)/_0xf361ce|0x0)*_0xf361ce,_0x2c8a86=((_0x65d469[_0x370f28(0x1f8)]/_0x4156d1|0x0)/_0xf361ce|0x0)*_0xf361ce,_0x55377c=_0x251dc3*_0x4075f6,_0x1b5ec5=_0x2c8a86*_0x4156d1,_0x32cda4=_0x4186de[_0x370f28(0x22d)]('2d');h_drawImage(_0x4e97eb,_0x32cda4,_0x65d469['width']-_0x55377c,_0x1b5ec5,_0x55377c,0x0,_0x55377c,0x0),h_drawImage(_0x4e97eb,_0x32cda4,_0x65d469[_0x370f28(0x27e)],_0x65d469[_0x370f28(0x1f8)]-_0x1b5ec5,0x0,_0x1b5ec5,0x0,_0x1b5ec5);for(let _0x4cfdde=0x0;_0x4cfdde<_0x4156d1;++_0x4cfdde){for(let _0x25f531=0x0;_0x25f531<_0x4075f6;++_0x25f531){const _0x4e3584=_0x2522a3[_0x4cfdde*_0x4075f6+_0x25f531],_0x2d2b27=_0x4e3584/_0x4075f6|0x0,_0x2e0d51=_0x4e3584-_0x2d2b27*_0x4075f6,_0x1befd0=_0x2e0d51*_0x251dc3,_0x14f6db=_0x2d2b27*_0x2c8a86,_0x162dd6=_0x25f531*_0x251dc3,_0x18c220=_0x4cfdde*_0x2c8a86;h_drawImage(_0x4e97eb,_0x32cda4,_0x251dc3,_0x2c8a86,_0x1befd0,_0x14f6db,_0x162dd6,_0x18c220);}}_0x4186de[_0x370f28(0x248)](_0x5b5824=>{const _0x143c76=_0x370f28;saveAs(_0x5b5824,(''+(_0xf76459+0x1))[_0x143c76(0x272)](0x3,'0')+_0x143c76(0x254)),downloading_current+=0x1,update_status();},'image/jpeg',0.97);},_0x4e97eb[_0x1546c1(0x278)]=_0x3b45e4;},h_drawImage=(_0x3a7e20,_0x325a30,_0x5897b0,_0x139873,_0x111add,_0x11e09a,_0x5f32f2,_0x5f5c8c)=>{if(_0x5897b0<=0x0||_0x139873<=0x0)return;_0x325a30['drawImage'](_0x3a7e20,_0x111add,_0x11e09a,_0x5897b0,_0x139873,_0x5f32f2,_0x5f5c8c,_0x5897b0,_0x139873);};((async()=>{const _0x51930a=a0_0x4a0a,_0x17320d=document['location'][_0x51930a(0x275)];if(_0x17320d[_0x51930a(0x26d)](['p','l','a','y','.','d','l','s','i','t','e','.','c','o','m','/','c','s','r','/','v','i','e','w','e','r'][_0x51930a(0x1fd)]('')))await download_dlsite();else _0x17320d[_0x51930a(0x26d)](['h','t','t','p','s',':','/','/','p','l','a','y','.','d','l','s','i','t','e','.','c','o','m','/','#','/','w','o','r','k'][_0x51930a(0x1fd)](''))&&await download_dlsite_book();})());